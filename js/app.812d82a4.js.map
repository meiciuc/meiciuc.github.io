{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/game/sounds/asteroid.mp3","webpack:///./src/game/sounds/asteroid.ogg","webpack:///./src/game/sounds/ship.ogg","webpack:///./src/vue/Game.vue?ac2e","webpack:///./src/game/sounds/shoot.ogg","webpack:///./src/game/sounds/shoot.mp3","webpack:///./src/App.vue?5ca2","webpack:///./src/vue/Game.vue?c18e","webpack:///./src/game/components/Animation.ts","webpack:///./src/game/components/Asteroid.ts","webpack:///./src/game/components/Audio.ts","webpack:///./src/game/components/Bullet.ts","webpack:///./src/game/components/Collision.ts","webpack:///./src/game/components/DeathThroes.ts","webpack:///./src/game/components/Display.ts","webpack:///./src/game/components/GameState.ts","webpack:///./src/game/components/Gun.ts","webpack:///./src/game/components/GunControls.ts","webpack:///./src/game/components/Motion.ts","webpack:///./src/game/components/MotionControls.ts","webpack:///./src/game/components/Position.ts","webpack:///./src/game/components/Spaceship.ts","webpack:///./src/game/graphics/Dot.ts","webpack:///./src/game/graphics/AsteroidDeathView.ts","webpack:///./src/game/graphics/AsteroidView.ts","webpack:///./src/game/graphics/BulletView.ts","webpack:///./src/game/graphics/SpaceshipDeathView.ts","webpack:///./src/game/graphics/SpaceshipView.ts","webpack:///./src/game/graphics/DebugCrossView.ts","webpack:///./src/game/Keyboard.ts","webpack:///./src/game/EntityCreator.ts","webpack:///./src/game/GameConfig.ts","webpack:///./src/game/sounds/index.ts","webpack:///./src/game/KeyPoll.ts","webpack:///./src/game/nodes.ts","webpack:///./src/game/systems/AnimationSystem.ts","webpack:///./src/game/systems/BulletAgeSystem.ts","webpack:///./src/game/systems/AudioSystem.ts","webpack:///./src/game/systems/CollisionSystem.ts","webpack:///./src/game/systems/DeathThroesSystem.ts","webpack:///./src/game/systems/GameManager.ts","webpack:///./src/game/systems/GunControlSystem.ts","webpack:///./src/vuex/index.ts","webpack:///./src/game/systems/SystemPriorities.ts","webpack:///./src/vuex/storeGameModule.ts","webpack:///./src/game/systems/HudSystem.ts","webpack:///./src/game/systems/MotionControlSystem.ts","webpack:///./src/game/systems/MovementSystem.ts","webpack:///./src/game/systems/RenderSystem.ts","webpack:///./src/game/Asteroids.ts","webpack:///./src/vue/Game.vue","webpack:///./src/vue/Game.vue?2301","webpack:///./src/vue/Game.vue?db89","webpack:///./src/App.vue","webpack:///./src/App.vue?c9fc","webpack:///./src/App.vue?665f","webpack:///./src/vk/VKBridge.ts","webpack:///./src/main.ts","webpack:///./src/game/sounds/ship.mp3"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","staticRenderFns","on","handleClick","ref","_v","_s","$store","state","storeGameModule","level","score","lives","shots","hits","precision","_m","_e","animation","fsm","toPlay","sound","lifeTime","radius","countdown","displayObject","GameState","WAIT_FOR_START","PLAY","FINISH","gameState","PAUSE","offsetFromParentX","offsetFromParentY","minimumShotInterval","bulletLifetime","shooting","timeSinceLastShot","trigger","velocityX","velocityY","angularVelocity","damping","left","right","accelerate","accelerationRate","rotationRate","x","y","rotation","maxDistance","angle","Math","random","PI","distance","speed","cos","sin","beginFill","drawCircle","endFill","setTransform","dots","len","AsteroidDeathView","numDots","dot","addChild","time","alpha","moveTo","posX","posY","lineTo","shape1","shape2","vel1x","vel1y","vel2x","vel2y","rot1","rot2","size","text","color","thickness","cross","drawRect","textStyle","fontFamily","fontSize","fill","label","width","height","SPACE","LEFT","RIGHT","UP","engine","config","entity","removeEntity","gameEntity","add","addEntity","asteroid","createState","withInstance","deathView","changeState","spaceship","motion","gun","parentPosition","bullet","DEFAULT_LIVES_COUNT","DEFAULT_SCREEN_SIZE_AREA","DEFAULT_ASTEROIDS_MIN_COUNT","DEFAULT_ASTEROID_MAX_SIZE","SCALE_SCREEN_TO_DEFAULT_SCREEN_SIZE_AREA","Sounds","WORD_SIZE","keys","Int32Array","keyDownHandler","event","keyCode","index","floor","keyUpHandler","addEventListener","isDown","AnimationNode","AsteroidCollisionNode","position","collision","audio","AudioNode","BulletAgeNode","BulletCollisionNode","DeathThroesNode","death","GameNode","GunControlNode","control","MotionControlNode","MovementNode","RenderNode","display","SpaceshipCollisionNode","SpaceshipNode","node","animate","creator","destroyEntity","sounds","mp3","a","ogg","shoot","ship","audioTypeDetect","document","createElement","canPlayMp3","canPlayType","canPlayOgg","type","loadAudioDB","audioContext","audioDB","Map","loadSound","url","fetch","response","arrayBuffer","decodeAudioData","audioBuffer","set","Promise","all","map","games","spaceships","asteroids","bullets","getNodeList","maxSize","minSize","oneSix","head","next","hypot","createAsteroid","play","currentGameState","gameNode","empty","positionX","positionY","deltaRadius","clearToAddSpaceship","createSpaceship","setForFinish","asteroidCount","minDistance","keyPoll","guns","game","createUserBullet","use","SystemPriorities","namespaced","mutations","reset","setState","setScore","setLives","setLevel","setHits","setShots","getters","storeState","setForStart","update","xDamp","abs","yDamp","container","options","emitStageEvents","gameConfig","resized","nodes","addToDisplay","stage","emit","handleWindowResize","e","removeFromDisplay","removeChild","app","backgroundColor","renderer","view","resize","appendChild","nodeAdded","nodeRemoved","render","rect","getBoundingClientRect","rectArea","scale","style","remove","clientWidth","clientHeight","tickProvider","AudioContext","delta","start","addSystem","preUpdate","move","resolveCollisions","createGame","setTimeout","$refs","console","log","components","component","Game","bridge","vkBridge","subscribe","send","VK","init","addCallback","vkScrollPos","vkHeight","vkOffset","handleOnScrollTop","callMethod","productionTip","store","h","$mount"],"mappings":"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","file":"js/app.812d82a4.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"media/asteroid.700707dc.mp3\";","module.exports = __webpack_public_path__ + \"media/asteroid.960a0b4d.ogg\";","module.exports = __webpack_public_path__ + \"media/ship.606800c8.ogg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=style&index=0&id=883e05de&lang=stylus&scoped=true&\"","module.exports = __webpack_public_path__ + \"media/shoot.164324a9.ogg\";","module.exports = __webpack_public_path__ + \"media/shoot.ecff5374.mp3\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap_container\",attrs:{\"id\":\"app\"}},[_c('game',{staticClass:\"wrap_container\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{on:{\"click\":_vm.handleClick}},[_c('div',{ref:\"game\",staticClass:\"game wrap_container\"}),_c('div',{staticClass:\"options wrap_container\"},[_c('ul',{staticClass:\"results\"},[_c('li',{staticClass:\"subtitle has-text-white game-score\"},[_vm._v(\"LEVEL: \"+_vm._s(_vm.$store.state.storeGameModule.level))]),_c('li',{staticClass:\"subtitle has-text-white game-score\"},[_vm._v(\"SCORE: \"+_vm._s(_vm.$store.state.storeGameModule.score))]),_c('li',{staticClass:\"subtitle has-text-white game-lives\"},[_vm._v(\"LIVES: \"+_vm._s(_vm.$store.state.storeGameModule.lives))]),_c('li',{staticClass:\"subtitle has-text-white game-lives\"},[_vm._v(\"shots: \"+_vm._s(_vm.$store.state.storeGameModule.shots))]),_c('li',{staticClass:\"subtitle has-text-white game-lives\"},[_vm._v(\"hits: \"+_vm._s(_vm.$store.state.storeGameModule.hits))]),_c('li',{staticClass:\"subtitle has-text-white game-lives\"},[_vm._v(\"precision: \"+_vm._s(_vm.precision))])]),(_vm.start)?_c('div',{staticClass:\"center\"},[_vm._m(0)]):_vm._e(),(_vm.finish)?_c('div',{staticClass:\"center\"},[_vm._m(1)]):_vm._e()])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"ASTEROIDS\")]),_c('h2',[_vm._v(\"Click to start\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"GAME OVER\")]),_c('h2',[_vm._v(\"Click to start\")])])}]\n\nexport { render, staticRenderFns }","import { Animatable } from '../graphics';\r\n\r\nexport class Animation {\r\n  public animation:Animatable;\r\n\r\n  public constructor(animation:Animatable) {\r\n    this.animation = animation;\r\n  }\r\n}\r\n","import { EntityStateMachine } from '@ash.ts/ash';\r\n\r\nexport class Asteroid {\r\n  public fsm:EntityStateMachine;\r\n\r\n  public constructor(fsm:EntityStateMachine) {\r\n    this.fsm = fsm;\r\n  }\r\n}\r\n","import { Sounds } from '../sounds';\r\n\r\nexport class Audio {\r\n  public toPlay:Sounds[] = [];\r\n\r\n  public play(sound:Sounds):void {\r\n    this.toPlay.push(sound);\r\n  }\r\n}\r\n","export class Bullet {\r\n  public lifeTime:number;\r\n\r\n  public constructor(lifeTime:number) {\r\n    this.lifeTime = lifeTime;\r\n  }\r\n}\r\n","export class Collision {\r\n  public radius:number;\r\n\r\n  public constructor(radius = 0) {\r\n    this.radius = radius;\r\n  }\r\n}\r\n","export class DeathThroes {\r\n  public countdown:number;\r\n\r\n  public constructor(countdown:number) {\r\n    this.countdown = countdown;\r\n  }\r\n}\r\n","import { DisplayObject } from 'pixi.js';\r\n\r\nexport class Display {\r\n  public displayObject:DisplayObject;\r\n\r\n  public constructor(displayObject:DisplayObject) {\r\n    this.displayObject = displayObject;\r\n  }\r\n}\r\n","export class GameState {\r\n\r\n    public static WAIT_FOR_START = 'wait';\r\n    public static PLAY = 'play';\r\n    public static PAUSE = 'pause';\r\n    public static FINISH = 'finish';\r\n\r\n    public state = GameState.WAIT_FOR_START;\r\n\r\n    public lives = 0;\r\n    public level = 0;\r\n    public hits = 0;\r\n    public shots = 0;\r\n\r\n    public setForStart(): void {\r\n        this.lives = 3;\r\n        this.level = 0;\r\n        this.hits = 0;\r\n        this.shots = 0;\r\n        this.state = GameState.PLAY;\r\n    }\r\n\r\n    public setForFinish(): void {\r\n        this.state = GameState.FINISH;\r\n    }\r\n\r\n    public update(gameState: GameState): void {\r\n        this.lives = gameState.lives;\r\n        this.level = gameState.level;\r\n        this.hits = gameState.hits;\r\n        this.shots = gameState.shots;\r\n        this.state = gameState.state;\r\n    }\r\n}\r\n","export class Gun {\r\n  public shooting = false;\r\n\r\n  public timeSinceLastShot = 0;\r\n\r\n  public offsetFromParentX:number;\r\n\r\n  public offsetFromParentY:number;\r\n\r\n  public minimumShotInterval:number;\r\n\r\n  public bulletLifetime:number;\r\n\r\n  public constructor(\r\n    offsetFromParentX:number,\r\n    offsetFromParentY:number,\r\n    minimumShotInterval = 0,\r\n    bulletLifetime = 0,\r\n  ) {\r\n    this.offsetFromParentX = offsetFromParentX;\r\n    this.offsetFromParentY = offsetFromParentY;\r\n    this.minimumShotInterval = minimumShotInterval;\r\n    this.bulletLifetime = bulletLifetime;\r\n  }\r\n}\r\n","export class GunControls {\r\n  public trigger:number;\r\n\r\n  public constructor(trigger = 0) {\r\n    this.trigger = trigger;\r\n  }\r\n}\r\n","export class Motion {\r\n  public velocityX:number;\r\n\r\n  public velocityY:number;\r\n\r\n  public angularVelocity:number;\r\n\r\n  public damping:number;\r\n\r\n  public constructor(\r\n    velocityX:number,\r\n    velocityY:number,\r\n    angularVelocity = 0,\r\n    damping = 0,\r\n  ) {\r\n    this.velocityX = velocityX;\r\n    this.velocityY = velocityY;\r\n    this.angularVelocity = angularVelocity;\r\n    this.damping = damping;\r\n  }\r\n}\r\n","export class MotionControls {\r\n  public left:number;\r\n\r\n  public right:number;\r\n\r\n  public accelerate:number;\r\n\r\n  public accelerationRate:number;\r\n\r\n  public rotationRate:number;\r\n\r\n  public constructor(\r\n    left = 0,\r\n    right = 0,\r\n    accelerate = 0,\r\n    accelerationRate = 0,\r\n    rotationRate = 0,\r\n  ) {\r\n    this.left = left;\r\n    this.right = right;\r\n    this.accelerate = accelerate;\r\n    this.accelerationRate = accelerationRate;\r\n    this.rotationRate = rotationRate;\r\n  }\r\n}\r\n","export class Position {\r\n  public x:number;\r\n\r\n  public y:number;\r\n\r\n  public rotation:number;\r\n\r\n  public constructor(x:number, y:number, rotation = 0) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.rotation = rotation;\r\n  }\r\n}\r\n","import { EntityStateMachine } from '@ash.ts/ash';\r\n\r\nexport class Spaceship {\r\n  public fsm:EntityStateMachine;\r\n\r\n  public constructor(fsm:EntityStateMachine) {\r\n    this.fsm = fsm;\r\n  }\r\n}\r\n","import { Graphics } from 'pixi.js';\r\n\r\nexport class Dot extends Graphics {\r\n  public velocityX:number;\r\n\r\n  public velocityY:number;\r\n\r\n  public constructor(maxDistance:number) {\r\n    super();\r\n\r\n    const angle:number = Math.random() * 2 * Math.PI;\r\n    const distance:number = Math.random() * maxDistance;\r\n    const speed:number = Math.random() * 10 + 10;\r\n    this.velocityX = Math.cos(angle) * speed;\r\n    this.velocityY = Math.sin(angle) * speed;\r\n\r\n    this.beginFill(0xffffff)\r\n      .drawCircle(0, 0, 1)\r\n      .endFill()\r\n      .setTransform(\r\n        Math.cos(angle) * distance,\r\n        Math.sin(angle) * distance,\r\n      );\r\n  }\r\n}\r\n","import { Container } from 'pixi.js';\r\nimport { Animatable } from './Animatable';\r\nimport { Dot } from './Dot';\r\n\r\nexport class AsteroidDeathView extends Container implements Animatable {\r\n    private static numDots = 8;\r\n\r\n    private dots: Dot[] = [];\r\n\r\n    public constructor(radius: number) {\r\n        super();\r\n        const len = AsteroidDeathView.numDots;\r\n        for (let i = 0; i < len; i += 1) {\r\n            const dot: Dot = new Dot(radius);\r\n            this.addChild(dot);\r\n            this.dots.push(dot);\r\n        }\r\n    }\r\n\r\n    public animate(time: number): void {\r\n        for (const dot of this.dots) {\r\n            dot.setTransform(\r\n                dot.x + dot.velocityX * time,\r\n                dot.y + dot.velocityY * time,\r\n            );\r\n            dot.alpha -= time / 2;\r\n        }\r\n    }\r\n}\r\n","import { Graphics } from 'pixi.js';\r\n\r\nexport class AsteroidView extends Graphics {\r\n  public constructor(radius:number) {\r\n    super();\r\n\r\n    this.moveTo(radius, 0).beginFill(0xffffff);\r\n    let angle = 0;\r\n    while (angle < Math.PI * 2) {\r\n      const length:number = (0.75 + Math.random() * 0.25) * radius;\r\n      const posX:number = Math.cos(angle) * length;\r\n      const posY:number = Math.sin(angle) * length;\r\n      this.lineTo(posX, posY);\r\n      angle += Math.random() * 0.5;\r\n    }\r\n    this.lineTo(radius, 0).endFill();\r\n  }\r\n}\r\n","import { Graphics } from 'pixi.js';\r\n\r\nexport class BulletView extends Graphics {\r\n  public constructor() {\r\n    super();\r\n\r\n    this.beginFill(0xffffff).drawCircle(0, 0, 2.5).endFill();\r\n  }\r\n}\r\n","import { Container, Graphics } from 'pixi.js';\r\n\r\nimport { Animatable } from './Animatable';\r\n\r\nexport class SpaceshipDeathView extends Container implements Animatable {\r\n  private readonly shape1:Graphics;\r\n\r\n  private readonly shape2:Graphics;\r\n\r\n  private readonly vel1x:number;\r\n\r\n  private readonly vel1y:number;\r\n\r\n  private readonly vel2x:number;\r\n\r\n  private readonly vel2y:number;\r\n\r\n  private readonly rot1:number;\r\n\r\n  private readonly rot2:number;\r\n\r\n  public constructor() {\r\n    super();\r\n\r\n    this.shape1 = new Graphics();\r\n    this.shape1.moveTo(10, 0).beginFill(0xffffff).lineTo(-7, 7).lineTo(-4, 0)\r\n      .lineTo(10, 0)\r\n      .endFill();\r\n    this.addChild(this.shape1);\r\n\r\n    this.shape2 = new Graphics();\r\n    this.shape2.moveTo(10, 0).beginFill(0xffffff).lineTo(-7, -7).lineTo(-4, 0)\r\n      .lineTo(10, 0)\r\n      .endFill();\r\n    this.addChild(this.shape2);\r\n\r\n    this.vel1x = Math.random() * 10 - 5;\r\n    this.vel1y = Math.random() * 10 + 10;\r\n    this.vel2x = Math.random() * 10 - 5;\r\n    this.vel2y = Math.random() * -10 - 10;\r\n    this.rot1 = Math.random() * 3 - 1.5;\r\n    this.rot2 = Math.random() * 3 - 1.5;\r\n  }\r\n\r\n  public animate(time:number):void {\r\n    const { shape1, shape2 } = this;\r\n    shape1.setTransform(\r\n      shape1.x + this.vel1x * time,\r\n      shape1.y + this.vel1y * time,\r\n      1,\r\n      1,\r\n      shape1.rotation + this.rot1 * time,\r\n    );\r\n    shape2.setTransform(\r\n      shape2.x + this.vel2x * time,\r\n      shape2.y + this.vel2y * time,\r\n      1,\r\n      1,\r\n      shape2.rotation + this.rot2 * time,\r\n    );\r\n  }\r\n}\r\n","import { Graphics } from 'pixi.js';\r\n\r\nexport class SpaceshipView extends Graphics {\r\n  public constructor() {\r\n    super();\r\n    this.moveTo(10, 0).beginFill(0xffffff).lineTo(-7, 7).lineTo(-4, 0)\r\n      .lineTo(-7, -7)\r\n      .lineTo(10, 0)\r\n      .endFill();\r\n  }\r\n}\r\n","import { Graphics, Container, Text, TextStyle } from 'pixi.js';\r\n\r\nexport class DebugCrossView extends Container {\r\n\r\n    public constructor(size: number, text = '', color = 0xffffff, alpha = .2) {\r\n        super();\r\n        const thickness = 2;\r\n\r\n        const cross: Graphics = new Graphics();\r\n        cross.beginFill(color, alpha)\r\n            .drawRect(-size / 2, -thickness / 2, size, thickness)\r\n            .endFill();\r\n        cross.beginFill(color, alpha)\r\n            .drawRect(-thickness / 2, -size / 2, thickness, size)\r\n            .endFill();\r\n        this.addChild(cross);\r\n\r\n        if (text) {\r\n            const textStyle: TextStyle = new TextStyle({\r\n                fontFamily: 'Arial',\r\n                fontSize: 12,\r\n                fill: 0xffffff,\r\n            });\r\n          \r\n            const label: Text = new Text(text, textStyle);\r\n            label.setTransform(-label.width / 2, -label.height / 2);\r\n            this.addChild(label);\r\n        }\r\n    }\r\n}\r\n","export const NUMBER_0 = 48;\r\nexport const NUMBER_1 = 49;\r\nexport const NUMBER_2 = 50;\r\nexport const NUMBER_3 = 51;\r\nexport const NUMBER_4 = 52;\r\nexport const NUMBER_5 = 53;\r\nexport const NUMBER_6 = 54;\r\nexport const NUMBER_7 = 55;\r\nexport const NUMBER_8 = 56;\r\nexport const NUMBER_9 = 57;\r\nexport const A = 65;\r\nexport const B = 66;\r\nexport const C = 67;\r\nexport const D = 68;\r\nexport const E = 69;\r\nexport const F = 70;\r\nexport const G = 71;\r\nexport const H = 72;\r\nexport const I = 73;\r\nexport const J = 74;\r\nexport const K = 75;\r\nexport const L = 76;\r\nexport const M = 77;\r\nexport const N = 78;\r\nexport const O = 79;\r\nexport const P = 80;\r\nexport const Q = 81;\r\nexport const R = 82;\r\nexport const S = 83;\r\nexport const T = 84;\r\nexport const U = 85;\r\nexport const V = 86;\r\nexport const W = 87;\r\nexport const X = 88;\r\nexport const Y = 89;\r\nexport const Z = 90;\r\nexport const NUMPAD_0 = 96;\r\nexport const NUMPAD_1 = 97;\r\nexport const NUMPAD_2 = 98;\r\nexport const NUMPAD_3 = 99;\r\nexport const NUMPAD_4 = 100;\r\nexport const NUMPAD_5 = 101;\r\nexport const NUMPAD_6 = 102;\r\nexport const NUMPAD_7 = 103;\r\nexport const NUMPAD_8 = 104;\r\nexport const NUMPAD_9 = 105;\r\nexport const NUMPAD_MULTIPLY = 106;\r\nexport const NUMPAD_ADD = 107;\r\nexport const NUMPAD_ENTER = 108;\r\nexport const NUMPAD_SUBTRACT = 109;\r\nexport const NUMPAD_DECIMAL = 110;\r\nexport const NUMPAD_DIVIDE = 111;\r\nexport const F1 = 112;\r\nexport const F2 = 113;\r\nexport const F3 = 114;\r\nexport const F4 = 115;\r\nexport const F5 = 116;\r\nexport const F6 = 117;\r\nexport const F7 = 118;\r\nexport const F8 = 119;\r\nexport const F9 = 120;\r\nexport const F10 = 121; //  F10 is used by browser\r\nexport const F11 = 122;\r\nexport const F12 = 123;\r\nexport const F13 = 124;\r\nexport const F14 = 125;\r\nexport const F15 = 126;\r\nexport const BACKSPACE = 8;\r\nexport const TAB = 9;\r\nexport const ALTERNATE = 18;\r\nexport const ENTER = 13;\r\nexport const COMMAND = 15;\r\nexport const SHIFT = 16;\r\nexport const CONTROL = 17;\r\nexport const BREAK = 19;\r\nexport const CAPS_LOCK = 20;\r\nexport const NUMPAD = 21;\r\nexport const ESCAPE = 27;\r\nexport const SPACE = 32;\r\nexport const PAGE_UP = 33;\r\nexport const PAGE_DOWN = 34;\r\nexport const END = 35;\r\nexport const HOME = 36;\r\nexport const LEFT = 37;\r\nexport const RIGHT = 39;\r\nexport const UP = 38;\r\nexport const DOWN = 40;\r\nexport const INSERT = 45;\r\nexport const DELETE = 46;\r\nexport const NUMLOCK = 144;\r\nexport const SEMICOLON = 186;\r\nexport const EQUAL = 187;\r\nexport const COMMA = 188;\r\nexport const MINUS = 189;\r\nexport const PERIOD = 190;\r\nexport const SLASH = 191;\r\nexport const BACKQUOTE = 192;\r\nexport const LEFTBRACKET = 219;\r\nexport const BACKSLASH = 220;\r\nexport const RIGHTBRACKET = 221;\r\nexport const QUOTE = 222;\r\n","import { Engine, Entity, EntityStateMachine } from '@ash.ts/ash';\r\nimport {\r\n    Animation,\r\n    Asteroid,\r\n    Audio,\r\n    Bullet,\r\n    Collision,\r\n    DeathThroes,\r\n    Display,\r\n    GameState,\r\n    Gun,\r\n    GunControls,\r\n    Motion,\r\n    MotionControls,\r\n    Position,\r\n    Spaceship,\r\n} from './components';\r\nimport { GameConfig } from './GameConfig';\r\nimport {\r\n    AsteroidDeathView,\r\n    AsteroidView,\r\n    BulletView,\r\n    DebugCrossView,\r\n    SpaceshipDeathView,\r\n    SpaceshipView,\r\n} from './graphics';\r\nimport * as Keyboard from './Keyboard';\r\n\r\nexport class EntityCreator {\r\n    private waitEntity!: Entity;\r\n\r\n    private engine: Engine;\r\n\r\n    private config: GameConfig;\r\n\r\n    public constructor(engine: Engine, config: GameConfig) {\r\n        this.engine = engine;\r\n        this.config = config;\r\n    }\r\n\r\n    public destroyEntity(entity: Entity): void {\r\n        this.engine.removeEntity(entity);\r\n    }\r\n\r\n    public createGame(): Entity {\r\n        const gameEntity: Entity = new Entity('game')\r\n            .add(new GameState())\r\n        this.engine.addEntity(gameEntity);\r\n        return gameEntity;\r\n    }\r\n\r\n    public createAsteroid(radius: number, x: number, y: number): Entity {\r\n        const asteroid: Entity = new Entity();\r\n\r\n        const fsm: EntityStateMachine = new EntityStateMachine(asteroid);\r\n\r\n        const velocityX = (Math.random() - 0.5) * 4 * (50 - radius);\r\n        const velocityY = (Math.random() - 0.5) * 4 * (50 - radius);\r\n        const angularVelocity: number = Math.random() * 2 - 1;\r\n\r\n        fsm.createState('alive')\r\n            .add(Motion)\r\n            .withInstance(new Motion(velocityX, velocityY, angularVelocity))\r\n            .add(Collision)\r\n            .withInstance(new Collision(radius))\r\n            .add(Display)\r\n            .withInstance(new Display(new AsteroidView(radius)));\r\n\r\n        const deathView: AsteroidDeathView = new AsteroidDeathView(radius);\r\n        fsm.createState('destroyed')\r\n            .add(Motion)\r\n            .withInstance(new Motion(velocityX, velocityY, 0))\r\n            .add(DeathThroes)\r\n            .withInstance(new DeathThroes(3))\r\n            .add(Display)\r\n            .withInstance(new Display(deathView))\r\n            .add(Animation)\r\n            .withInstance(new Animation(deathView));\r\n\r\n        asteroid\r\n            .add(new Asteroid(fsm))\r\n            .add(new Position(x, y, 0))\r\n            .add(new Audio());\r\n\r\n        fsm.changeState('alive');\r\n        this.engine.addEntity(asteroid);\r\n        return asteroid;\r\n    }\r\n\r\n    public createSpaceship(): Entity {\r\n        const spaceship: Entity = new Entity();\r\n        const fsm: EntityStateMachine = new EntityStateMachine(spaceship);\r\n\r\n        const motion: Motion = new Motion(0, 0, 0, 15);\r\n\r\n        fsm.createState('playing')\r\n            .add(Motion)\r\n            .withInstance(motion)\r\n            .add(MotionControls)\r\n            .withInstance(new MotionControls(Keyboard.LEFT, Keyboard.RIGHT, Keyboard.UP, 100, 3))\r\n            .add(Gun)\r\n            .withInstance(new Gun(8, 0, 0.3, 2))\r\n            .add(GunControls)\r\n            .withInstance(new GunControls(Keyboard.SPACE))\r\n            .add(Collision)\r\n            .withInstance(new Collision(9))\r\n            .add(Display)\r\n            .withInstance(new Display(new SpaceshipView()));\r\n\r\n        const deathView: SpaceshipDeathView = new SpaceshipDeathView();\r\n        fsm.createState('destroyed')\r\n            .add(Motion)\r\n            .withInstance(motion)\r\n            .add(DeathThroes)\r\n            .withInstance(new DeathThroes(5))\r\n            .add(Display)\r\n            .withInstance(new Display(deathView))\r\n            .add(Animation)\r\n            .withInstance(new Animation(deathView));\r\n\r\n        spaceship\r\n            .add(new Spaceship(fsm))\r\n            .add(new Position(this.config.width / 2, this.config.height / 2, 0))\r\n            .add(new Audio());\r\n\r\n        fsm.changeState('playing');\r\n        this.engine.addEntity(spaceship);\r\n        return spaceship;\r\n    }\r\n\r\n    public createUserBullet(gun: Gun, parentPosition: Position): Entity {\r\n        const cos: number = Math.cos(parentPosition.rotation);\r\n        const sin: number = Math.sin(parentPosition.rotation);\r\n        const bullet: Entity = new Entity()\r\n            .add(new Bullet(gun.bulletLifetime))\r\n            .add(new Position(\r\n                cos * gun.offsetFromParentX - sin * gun.offsetFromParentY + parentPosition.x,\r\n                sin * gun.offsetFromParentX + cos * gun.offsetFromParentY + parentPosition.y,\r\n                0,\r\n            ))\r\n            .add(new Collision(0))\r\n            .add(new Motion(cos * 150, sin * 150, 0, 0))\r\n            .add(new Display(new BulletView()));\r\n        this.engine.addEntity(bullet);\r\n        return bullet;\r\n    }\r\n\r\n    public createDebugCrossView(size: number, x: number, y: number): Entity {\r\n        const entity: Entity = new Entity()\r\n            .add(new Display(new DebugCrossView(size, `${x}:${y}`)))\r\n            .add(new Position(x, y));\r\n        this.engine.addEntity(entity);\r\n        return entity;\r\n    }\r\n}\r\n","export class GameConfig {\r\n\r\n    public static DEFAULT_LIVES_COUNT = 3;\r\n\r\n    public static DEFAULT_SCREEN_SIZE_AREA = 800 * 600;\r\n    public static DEFAULT_ASTEROIDS_MIN_COUNT = 2;\r\n    public static DEFAULT_ASTEROID_MAX_SIZE = 30;\r\n    \r\n    public static SCALE_SCREEN_TO_DEFAULT_SCREEN_SIZE_AREA = true;\r\n\r\n    public width: number;\r\n    public height: number;\r\n\r\n    public constructor(width: number, height: number) {\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n}\r\n","import asteroidSoundMp3 from './asteroid.mp3';\r\nimport asteroidSoundOgg from './asteroid.ogg';\r\nimport shootSoundMp3 from './shoot.mp3';\r\nimport shootSoundOgg from './shoot.ogg';\r\nimport shipSoundMp3 from './ship.mp3';\r\nimport shipSoundOgg from './ship.ogg';\r\n\r\nexport enum Sounds {\r\n  asteroid,\r\n  ship,\r\n  shoot,\r\n}\r\n\r\nconst sounds = [\r\n  {\r\n    key: Sounds.asteroid,\r\n    mp3: asteroidSoundMp3,\r\n    ogg: asteroidSoundOgg,\r\n  }, {\r\n    key: Sounds.shoot,\r\n    mp3: shootSoundMp3,\r\n    ogg: shootSoundOgg,\r\n  }, {\r\n    key: Sounds.ship,\r\n    mp3: shipSoundMp3,\r\n    ogg: shipSoundOgg,\r\n  },\r\n];\r\n\r\nfunction audioTypeDetect():'mp3' | 'ogg' | null {\r\n  const audio = document.createElement('audio');\r\n  const canPlayMp3 = audio.canPlayType('audio/mpeg');\r\n  const canPlayOgg = audio.canPlayType('audio/ogg');\r\n\r\n  let type:'mp3' | 'ogg' | null = null;\r\n\r\n  if (canPlayMp3 === 'probably') {\r\n    type = 'mp3';\r\n  } else if (canPlayOgg === 'probably') {\r\n    type = 'ogg';\r\n  } else if (canPlayMp3 === 'maybe') {\r\n    type = 'mp3';\r\n  } else if (canPlayOgg === 'maybe') {\r\n    type = 'ogg';\r\n  }\r\n\r\n  return type;\r\n}\r\n\r\nexport async function loadAudioDB(audioContext:AudioContext):Promise<Map<Sounds, AudioBuffer>> {\r\n  const audioDB = new Map<Sounds, AudioBuffer>();\r\n  const type = audioTypeDetect();\r\n\r\n  const loadSound = async (url:string, key:Sounds):Promise<any> => {\r\n    const response = await fetch(url);\r\n    const arrayBuffer = await response.arrayBuffer();\r\n    const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);\r\n    audioDB.set(key, audioBuffer);\r\n  };\r\n\r\n  if (type) {\r\n    await Promise.all(sounds.map((sound) => loadSound(sound[type!], sound.key)));\r\n  }\r\n\r\n  return audioDB;\r\n}\r\n","/* eslint-disable no-bitwise */\r\nconst WORD_SIZE = 32;\r\n\r\nexport class KeyPoll {\r\n  private keys:Int32Array = new Int32Array(4);\r\n\r\n  public constructor() {\r\n    window.addEventListener('keyup', this.keyUpHandler);\r\n    window.addEventListener('keydown', this.keyDownHandler);\r\n  }\r\n\r\n  public isDown(key:number):boolean {\r\n    const i = Math.floor(key / WORD_SIZE);\r\n    return (this.keys[i] & (1 << key - i * WORD_SIZE)) !== 0;\r\n  }\r\n\r\n  public isUp(key:number):boolean {\r\n    return !this.isDown(key);\r\n  }\r\n\r\n  private keyDownHandler = (event:KeyboardEvent):void => {\r\n    const { keyCode } = event;\r\n    const index = Math.floor(keyCode / WORD_SIZE);\r\n    this.keys[index] |= (1 << keyCode - index * WORD_SIZE);\r\n  };\r\n\r\n  private keyUpHandler = (event:KeyboardEvent):void => {\r\n    const { keyCode } = event;\r\n    const index = Math.floor(keyCode / WORD_SIZE);\r\n    this.keys[index] &= ~(1 << keyCode - index * WORD_SIZE);\r\n  };\r\n}\r\n","import { defineNode } from '@ash.ts/ash';\r\nimport {\r\n  Animation,\r\n  Asteroid,\r\n  Audio,\r\n  Bullet,\r\n  Collision,\r\n  DeathThroes,\r\n  Display,\r\n  GameState,\r\n  Gun,\r\n  GunControls,\r\n  Motion,\r\n  MotionControls,\r\n  Position,\r\n  Spaceship,\r\n} from './components';\r\n\r\nexport const AnimationNode = defineNode({\r\n  animation: Animation,\r\n}, 'AnimationNode');\r\nexport type AnimationNode = InstanceType<typeof AnimationNode>;\r\n\r\nexport const AsteroidCollisionNode = defineNode({\r\n  asteroid: Asteroid,\r\n  position: Position,\r\n  collision: Collision,\r\n  audio: Audio,\r\n}, 'AsteroidCollisionNode');\r\nexport type AsteroidCollisionNode = InstanceType<typeof AsteroidCollisionNode>;\r\n\r\nexport const AudioNode = defineNode({\r\n  audio: Audio,\r\n}, 'AudioNode');\r\nexport type AudioNode = InstanceType<typeof AudioNode>;\r\n\r\nexport const BulletAgeNode = defineNode({\r\n  bullet: Bullet,\r\n}, 'BulletAgeNode');\r\nexport type BulletAgeNode = InstanceType<typeof BulletAgeNode>;\r\n\r\nexport const BulletCollisionNode = defineNode({\r\n  bullet: Bullet,\r\n  position: Position,\r\n  collision: Collision,\r\n}, 'BulletCollisionNode');\r\nexport type BulletCollisionNode = InstanceType<typeof BulletCollisionNode>;\r\n\r\nexport const DeathThroesNode = defineNode({\r\n  death: DeathThroes,\r\n}, 'DeathThroesNode');\r\nexport type DeathThroesNode = InstanceType<typeof DeathThroesNode>;\r\n\r\nexport const GameNode = defineNode({\r\n  state: GameState,\r\n}, 'GameNode');\r\nexport type GameNode = InstanceType<typeof GameNode>;\r\n\r\nexport const GunControlNode = defineNode({\r\n  control: GunControls,\r\n  gun: Gun,\r\n  position: Position,\r\n  audio: Audio,\r\n}, 'GunControlNode');\r\nexport type GunControlNode = InstanceType<typeof GunControlNode>;\r\n\r\nexport const MotionControlNode = defineNode({\r\n  control: MotionControls,\r\n  position: Position,\r\n  motion: Motion,\r\n}, 'MotionControlNode');\r\nexport type MotionControlNode = InstanceType<typeof MotionControlNode>;\r\n\r\nexport const MovementNode = defineNode({\r\n  position: Position,\r\n  motion: Motion,\r\n}, 'MovementNode');\r\nexport type MovementNode = InstanceType<typeof MovementNode>;\r\n\r\nexport const RenderNode = defineNode({\r\n  position: Position,\r\n  display: Display,\r\n}, 'RenderNode');\r\nexport type RenderNode = InstanceType<typeof RenderNode>;\r\n\r\nexport const SpaceshipCollisionNode = defineNode({\r\n  spaceship: Spaceship,\r\n  position: Position,\r\n  collision: Collision,\r\n  audio: Audio,\r\n}, 'SpaceshipCollisionNode');\r\nexport type SpaceshipCollisionNode = InstanceType<typeof SpaceshipCollisionNode>;\r\n\r\nexport const SpaceshipNode = defineNode({\r\n  spaceship: Spaceship,\r\n  position: Position,\r\n}, 'SpaceshipNode');\r\nexport type SpaceshipNode = InstanceType<typeof SpaceshipNode>;","import { ListIteratingSystem } from '@ash.ts/ash';\r\nimport { AnimationNode } from '../nodes';\r\n\r\nexport class AnimationSystem extends ListIteratingSystem<AnimationNode> {\r\n  public constructor() {\r\n    super(AnimationNode);\r\n  }\r\n\r\n  public updateNode(node:AnimationNode, time:number):void {\r\n    node.animation.animation.animate(time);\r\n  }\r\n}\r\n","import { ListIteratingSystem } from '@ash.ts/ash';\r\nimport { EntityCreator } from '../EntityCreator';\r\nimport { BulletAgeNode } from '../nodes';\r\n\r\nexport class BulletAgeSystem extends ListIteratingSystem<BulletAgeNode> {\r\n  private creator:EntityCreator;\r\n\r\n  public constructor(creator:EntityCreator) {\r\n    super(BulletAgeNode);\r\n    this.creator = creator;\r\n  }\r\n\r\n  public updateNode(node:BulletAgeNode, time:number):void {\r\n    const { bullet } = node;\r\n    bullet.lifeTime -= time;\r\n    if (bullet.lifeTime <= 0) {\r\n      this.creator.destroyEntity(node.entity);\r\n    }\r\n  }\r\n}\r\n","import { ListIteratingSystem } from '@ash.ts/ash';\r\nimport { AudioNode } from '../nodes';\r\nimport { Sounds } from '../sounds';\r\n\r\nexport class AudioSystem extends ListIteratingSystem<AudioNode> {\r\n  private audioContext:AudioContext;\r\n\r\n  private audioDB:Map<Sounds, AudioBuffer>;\r\n\r\n  public constructor(audioContext:AudioContext, audioDB:Map<Sounds, AudioBuffer>) {\r\n    super(AudioNode);\r\n    this.audioContext = audioContext;\r\n    this.audioDB = audioDB;\r\n  }\r\n\r\n  public updateNode(node:AudioNode, time:number):void {\r\n    for (const name of node.audio.toPlay) {\r\n      const sound = this.audioDB.get(name) || null;\r\n      const source = this.audioContext.createBufferSource();\r\n      source.buffer = sound;\r\n      source.connect(this.audioContext.destination);\r\n      source.start(0);\r\n    }\r\n    node.audio.toPlay.length = 0;\r\n  }\r\n}\r\n","import { Engine, NodeList, System } from '@ash.ts/ash';\r\nimport { EntityCreator } from '../EntityCreator';\r\nimport { GameConfig } from '../GameConfig';\r\nimport { AsteroidCollisionNode, BulletCollisionNode, GameNode, SpaceshipCollisionNode } from '../nodes';\r\nimport { Sounds } from '../sounds';\r\n\r\nexport class CollisionSystem extends System {\r\n    private creator: EntityCreator;\r\n\r\n    private games: NodeList<GameNode> | null = null;\r\n    private spaceships: NodeList<SpaceshipCollisionNode> | null = null;\r\n    private asteroids: NodeList<AsteroidCollisionNode> | null = null;\r\n    private bullets: NodeList<BulletCollisionNode> | null = null;\r\n\r\n    public constructor(creator: EntityCreator) {\r\n        super();\r\n        this.creator = creator;\r\n    }\r\n\r\n    public addToEngine(engine: Engine): void {\r\n        this.games = engine.getNodeList(GameNode);\r\n        this.spaceships = engine.getNodeList(SpaceshipCollisionNode);\r\n        this.asteroids = engine.getNodeList(AsteroidCollisionNode);\r\n        this.bullets = engine.getNodeList(BulletCollisionNode);\r\n    }\r\n\r\n    public update(time: number): void {\r\n        const maxSize = GameConfig.DEFAULT_ASTEROID_MAX_SIZE;\r\n        const minSize = Math.floor(maxSize * (1 / 3));\r\n        const oneSix = Math.floor(maxSize / 6);\r\n\r\n        for (let bullet = this.bullets!.head; bullet; bullet = bullet.next) {\r\n            for (let asteroid = this.asteroids!.head; asteroid; asteroid = asteroid.next) {\r\n                const distance = Math.hypot(asteroid.position.x - bullet.position.x, asteroid.position.y - bullet.position.y);\r\n                if (distance <= asteroid.collision.radius) {\r\n                    this.creator.destroyEntity(bullet.entity);\r\n                    if (asteroid.collision.radius > minSize) {\r\n                        const radius = asteroid.collision.radius - minSize;\r\n                        let x = asteroid.position.x + Math.random() * 10 - oneSix;\r\n                        let y = asteroid.position.y + Math.random() * 10 - oneSix;\r\n                        this.creator.createAsteroid(radius, x, y);\r\n                        x = asteroid.position.x + Math.random() * 10 - oneSix;\r\n                        y = asteroid.position.y + Math.random() * 10 - oneSix;\r\n                        this.creator.createAsteroid(radius, x, y);\r\n                    }\r\n                    asteroid.asteroid.fsm.changeState('destroyed');\r\n                    asteroid.audio.play(Sounds.asteroid);\r\n                    if (this.games!.head) {\r\n                        this.games!.head.state.hits += 1;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let spaceship = this.spaceships!.head; spaceship; spaceship = spaceship.next) {\r\n            for (let asteroid = this.asteroids!.head; asteroid; asteroid = asteroid.next) {\r\n                const distance = Math.hypot(\r\n                    asteroid.position.x - spaceship.position.x,\r\n                    asteroid.position.y - spaceship.position.y,\r\n                );\r\n                if (distance <= asteroid.collision.radius + spaceship.collision.radius) {\r\n                    spaceship.spaceship.fsm.changeState('destroyed');\r\n                    spaceship.audio.play(Sounds.ship);\r\n                    if (this.games!.head) {\r\n                        this.games!.head.state.lives -= 1;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public removeFromEngine(engine: Engine): void {\r\n        this.games = null;\r\n        this.spaceships = null;\r\n        this.asteroids = null;\r\n        this.bullets = null;\r\n    }\r\n}\r\n","import { ListIteratingSystem } from '@ash.ts/ash';\r\nimport { EntityCreator } from '../EntityCreator';\r\nimport { DeathThroesNode } from '../nodes';\r\n\r\nexport class DeathThroesSystem extends ListIteratingSystem<DeathThroesNode> {\r\n  private creator:EntityCreator;\r\n\r\n  public constructor(creator:EntityCreator) {\r\n    super(DeathThroesNode);\r\n    this.creator = creator;\r\n  }\r\n\r\n  public updateNode(node:DeathThroesNode, time:number):void {\r\n    node.death.countdown -= time;\r\n    if (node.death.countdown <= 0) {\r\n      this.creator.destroyEntity(node.entity);\r\n    }\r\n  }\r\n}\r\n","import { Engine, NodeList, System } from '@ash.ts/ash';\r\nimport { GameState } from '../components';\r\nimport { EntityCreator } from '../EntityCreator';\r\nimport { GameConfig } from '../GameConfig';\r\nimport { AsteroidCollisionNode, BulletCollisionNode, GameNode, SpaceshipNode } from '../nodes';\r\n\r\nexport class GameManager extends System {\r\n    private config: GameConfig;\r\n    private creator: EntityCreator;\r\n\r\n    private games: NodeList<GameNode> | null = null;\r\n    private spaceships: NodeList<SpaceshipNode> | null = null;\r\n    private asteroids: NodeList<AsteroidCollisionNode> | null = null;\r\n    private bullets: NodeList<BulletCollisionNode> | null = null;\r\n\r\n    private currentGameState = '';\r\n\r\n    public constructor(creator: EntityCreator, config: GameConfig) {\r\n        super();\r\n        this.creator = creator;\r\n        this.config = config;\r\n    }\r\n\r\n    public addToEngine(engine: Engine): void {\r\n        this.games = engine.getNodeList(GameNode);\r\n        this.spaceships = engine.getNodeList(SpaceshipNode);\r\n        this.asteroids = engine.getNodeList(AsteroidCollisionNode);\r\n        this.bullets = engine.getNodeList(BulletCollisionNode);\r\n    }\r\n\r\n    public removeFromEngine(engine: Engine): void {\r\n        this.games = null;\r\n        this.spaceships = null;\r\n        this.asteroids = null;\r\n        this.bullets = null;\r\n    }\r\n\r\n    public update(time: number): void {\r\n        const gameNode = this.games!.head;\r\n        if (!gameNode) {\r\n            return;\r\n        }\r\n\r\n        if (gameNode.state.state != GameState.PLAY) {\r\n            this.currentGameState = gameNode.state.state;\r\n            return;\r\n        }\r\n\r\n        if (this.currentGameState == GameState.WAIT_FOR_START || this.currentGameState == GameState.FINISH) {\r\n            // start\r\n            while (this.asteroids?.head) {\r\n                this.creator.destroyEntity(this.asteroids.head.entity);\r\n            }\r\n        }\r\n\r\n        this.currentGameState = gameNode.state.state;\r\n\r\n        if (this.spaceships!.empty) {\r\n            if (gameNode.state.lives) {\r\n                // next live\r\n                const positionX = this.config.width / 2;\r\n                const positionY = this.config.height / 2;\r\n                const deltaRadius = Math.floor(GameConfig.DEFAULT_ASTEROID_MAX_SIZE * 1.7);\r\n                let clearToAddSpaceship = true;\r\n                for (let asteroid = this.asteroids!.head; asteroid; asteroid = asteroid.next) {\r\n                    const distance = Math.hypot(asteroid.position.x - positionX, asteroid.position.y - positionY);\r\n                    if (distance <= asteroid.collision.radius + deltaRadius) {\r\n                        clearToAddSpaceship = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (clearToAddSpaceship) {\r\n                    this.creator.createSpaceship();\r\n                }\r\n            } else {\r\n                // finish\r\n                gameNode.state.setForFinish();\r\n            }\r\n        }\r\n\r\n        if (this.asteroids!.empty && this.bullets!.empty && this.spaceships!.head) {\r\n            // next level\r\n            const spaceship: SpaceshipNode | null = this.spaceships!.head;\r\n            gameNode.state.level += 1;\r\n            const asteroidCount: number = GameConfig.DEFAULT_ASTEROIDS_MIN_COUNT + gameNode.state.level;\r\n            const minDistance = Math.floor(GameConfig.DEFAULT_ASTEROID_MAX_SIZE * 2.7);\r\n            for (let i = 0; i < asteroidCount; i += 1) {\r\n                let positionX: number;\r\n                let positionY: number;\r\n                // check not on top of spaceship\r\n                do {\r\n                    positionX = Math.random() * this.config.width;\r\n                    positionY = Math.random() * this.config.height;\r\n                }\r\n                while (Math.hypot(positionX - spaceship.position.x, positionY - spaceship.position.y) <= minDistance);\r\n                this.creator.createAsteroid(GameConfig.DEFAULT_ASTEROID_MAX_SIZE, positionX, positionY);\r\n            }\r\n        }\r\n    }\r\n}","import { Engine, NodeList, System } from '@ash.ts/ash';\r\nimport { EntityCreator } from '../EntityCreator';\r\nimport { KeyPoll } from '../KeyPoll';\r\nimport { GameNode, GunControlNode } from '../nodes';\r\nimport { Sounds } from '../sounds';\r\n\r\nexport class GunControlSystem extends System {\r\n    \r\n    private readonly keyPoll: KeyPoll;\r\n    private readonly creator: EntityCreator;\r\n\r\n    private guns: NodeList<GunControlNode> | null = null;\r\n    private game: NodeList<GameNode> | null = null;\r\n\r\n    public constructor(keyPoll: KeyPoll, creator: EntityCreator) {\r\n        super();\r\n        this.keyPoll = keyPoll;\r\n        this.creator = creator;\r\n    }\r\n\r\n    addToEngine(engine: Engine): void {\r\n        this.guns = engine.getNodeList(GunControlNode);\r\n        this.game = engine.getNodeList(GameNode);\r\n    }\r\n\r\n    removeFromEngine(engine: Engine): void {\r\n        this.guns = null;\r\n        this.game = null;\r\n    }\r\n\r\n    update(time: number): void {\r\n        for (let node: GunControlNode | undefined | null = this.guns?.head; node; node = node?.next) {\r\n            const { control } = node;\r\n            const { position } = node;\r\n            const { gun } = node;\r\n\r\n            gun.shooting = this.keyPoll.isDown(control.trigger);\r\n            gun.timeSinceLastShot += time;\r\n            if (gun.shooting && gun.timeSinceLastShot >= gun.minimumShotInterval) {\r\n                if (this.game && this.game.head) {\r\n                    this.game.head.state.shots++\r\n                }\r\n                this.creator.createUserBullet(gun, position);\r\n                node.audio.play(Sounds.shoot);\r\n                gun.timeSinceLastShot = 0;\r\n            }\r\n        }\r\n    }\r\n}\r\n","import Vue from \"vue\";\nimport Vuex, { Store } from \"vuex\";\n\nVue.use(Vuex);\n\nexport default new Store({});","export enum SystemPriorities {\r\n  preUpdate = 1,\r\n  update = 2,\r\n  move = 3,\r\n  resolveCollisions = 4,\r\n  animate = 5,\r\n  render = 6,\r\n  audio = 7,\r\n}\r\n","import { GameState } from \"@/game/components\";\r\nimport { createModule } from \"vuexok\";\r\nimport store from \"./index\";\r\n\r\nexport default createModule(store, \"storeGameModule\", {\r\n    namespaced: true,\r\n    state: {\r\n        state: GameState.WAIT_FOR_START,\r\n        \r\n        score: 0,\r\n        lives: 0,\r\n        level: 0,\r\n        hits: 0,\r\n        shots: 0,\r\n    },\r\n    mutations: {\r\n        reset(state) {\r\n            state.state = GameState.WAIT_FOR_START;\r\n            state.score = 0;\r\n            state.lives = 0;\r\n            state.level = 0;\r\n        },\r\n        setState(state, value: string) {\r\n            state.state = value;\r\n        },\r\n        setScore(state, value: number) {\r\n            state.score = value;\r\n        },\r\n        setLives(state, value: number) {\r\n            state.lives = value;\r\n        },\r\n        setLevel(state, value: number) {\r\n            state.level = value;\r\n        },\r\n        setHits(state, value: number) {\r\n            state.hits = value;\r\n        },\r\n        setShots(state, value: number) {\r\n            state.shots = value;\r\n        }\r\n\r\n    },\r\n    getters: {\r\n        level(state) {\r\n            const { level } = state;\r\n            return level;\r\n        },\r\n        state(storeState) {\r\n            const { state } = storeState;\r\n            return state;\r\n        },\r\n        score(state) {\r\n            const { score } = state;\r\n            return score;\r\n        },\r\n        lives(state) {\r\n            const { lives } = state;\r\n            return lives;\r\n        }\r\n        ,\r\n        hits(state) {\r\n            const { hits } = state;\r\n            return hits;\r\n        },\r\n        shots(state) {\r\n            const { shots } = state;\r\n            return shots;\r\n        }\r\n    }\r\n});\r\n","import storeGameModule from '@/vuex/storeGameModule';\r\nimport { Engine, NodeList, System } from '@ash.ts/ash';\r\nimport { GameState } from '../components';\r\nimport { GameNode } from '../nodes';\r\n\r\nexport class HudSystem extends System {\r\n    \r\n    private game: NodeList<GameNode> | null = null;\r\n    private gameState: GameState = new GameState();\r\n    \r\n    addToEngine(engine: Engine): void {\r\n        this.game = engine.getNodeList(GameNode);\r\n    }\r\n    removeFromEngine(engine: Engine): void {\r\n        this.game = null;\r\n    }\r\n    update(time: number): void {\r\n        const state: GameState | null | undefined = this.game?.head?.state;\r\n        if (!state) {\r\n            return;\r\n        }\r\n\r\n        if (storeGameModule.getters.state != this.gameState.state) {\r\n            if (\r\n                (this.gameState.state == GameState.WAIT_FOR_START || this.gameState.state == GameState.FINISH)\r\n                && storeGameModule.getters.state == GameState.PLAY\r\n            ) {\r\n                this.gameState.setForStart();\r\n                state.setForStart();\r\n            } else if (storeGameModule.getters.state == GameState.FINISH) {\r\n                this.gameState.setForFinish();\r\n                state.setForFinish();\r\n            } else {\r\n                this.gameState.state = storeGameModule.getters.state;\r\n                state.state = this.gameState.state;\r\n            }\r\n        } else {\r\n            if (state.state != this.gameState.state) {\r\n                this.gameState.state = state.state;\r\n                storeGameModule.mutations.setState(state.state);\r\n            }\r\n    \r\n            storeGameModule.mutations.setLives(state.lives);\r\n            storeGameModule.mutations.setLevel(state.level);\r\n            storeGameModule.mutations.setShots(state.shots);\r\n            storeGameModule.mutations.setHits(state.hits);\r\n        }\r\n\r\n        this.gameState.update(state);\r\n    }\r\n}\r\n","import { ListIteratingSystem } from '@ash.ts/ash';\r\nimport { KeyPoll } from '../KeyPoll';\r\nimport { MotionControlNode } from '../nodes';\r\n\r\nexport class MotionControlSystem extends ListIteratingSystem<MotionControlNode> {\r\n  private keyPoll:KeyPoll;\r\n\r\n  public constructor(keyPoll:KeyPoll) {\r\n    super(MotionControlNode);\r\n    this.keyPoll = keyPoll;\r\n  }\r\n\r\n  public updateNode(node:MotionControlNode, time:number):void {\r\n    const { control } = node;\r\n    const { position } = node;\r\n    const { motion } = node;\r\n\r\n    if (this.keyPoll.isDown(control.left)) {\r\n      position.rotation -= control.rotationRate * time;\r\n    }\r\n\r\n    if (this.keyPoll.isDown(control.right)) {\r\n      position.rotation += control.rotationRate * time;\r\n    }\r\n\r\n    if (this.keyPoll.isDown(control.accelerate)) {\r\n      motion.velocityX += Math.cos(position.rotation) * control.accelerationRate * time;\r\n      motion.velocityY += Math.sin(position.rotation) * control.accelerationRate * time;\r\n    }\r\n  }\r\n}\r\n","import { ListIteratingSystem } from '@ash.ts/ash';\r\nimport { GameConfig } from '../GameConfig';\r\nimport { MovementNode } from '../nodes';\r\n\r\nexport class MovementSystem extends ListIteratingSystem<MovementNode> {\r\n    private readonly config: GameConfig;\r\n\r\n    public constructor(config: GameConfig) {\r\n        super(MovementNode);\r\n        this.config = config;\r\n    }\r\n\r\n    public updateNode(node: MovementNode, time: number): void {\r\n        const { position, motion } = node;\r\n        const { width, height } = this.config;\r\n        position.x += motion.velocityX * time;\r\n        position.y += motion.velocityY * time;\r\n        if (position.x < 0) {\r\n            position.x += width;\r\n        }\r\n        if (position.x > width) {\r\n            position.x -= width;\r\n        }\r\n        if (position.y < 0) {\r\n            position.y += height;\r\n        }\r\n        if (position.y > height) {\r\n            position.y -= height;\r\n        }\r\n        position.rotation += motion.angularVelocity * time;\r\n        if (motion.damping > 0) {\r\n            const xDamp: number = Math.abs(Math.cos(position.rotation) * motion.damping * time);\r\n            const yDamp: number = Math.abs(Math.sin(position.rotation) * motion.damping * time);\r\n            if (motion.velocityX > xDamp) {\r\n                motion.velocityX -= xDamp;\r\n            } else if (motion.velocityX < -xDamp) {\r\n                motion.velocityX += xDamp;\r\n            } else {\r\n                motion.velocityX = 0;\r\n            }\r\n            if (motion.velocityY > yDamp) {\r\n                motion.velocityY -= yDamp;\r\n            } else if (motion.velocityY < -yDamp) {\r\n                motion.velocityY += yDamp;\r\n            } else {\r\n                motion.velocityY = 0;\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { Application, Container, Renderer, AbstractRenderer } from 'pixi.js';\r\nimport { Engine, NodeList, System } from '@ash.ts/ash';\r\n\r\nimport { RenderNode, SpaceshipNode } from '../nodes';\r\nimport { GameConfig } from '../GameConfig';\r\n\r\ninterface RenderSystemOptions {\r\n    emitStageEvents: boolean;\r\n}\r\n\r\nexport class RenderSystem extends System {\r\n    private resized = false;\r\n\r\n    private nodes: NodeList<RenderNode> | null = null;\r\n\r\n    private readonly renderer: Renderer | AbstractRenderer;\r\n    private readonly stage: Container;\r\n    private readonly view: HTMLCanvasElement;\r\n    private readonly gameConfig: GameConfig;\r\n\r\n    private container: HTMLElement;\r\n\r\n    private options: RenderSystemOptions;\r\n\r\n    private spaceship: NodeList<SpaceshipNode> | null = null;\r\n    \r\n    public constructor(container: HTMLElement, options: RenderSystemOptions = { emitStageEvents: true }, gameConfig: GameConfig) {\r\n        super();\r\n\r\n        this.container = container;\r\n        this.options = options;\r\n        this.gameConfig = gameConfig;\r\n\r\n        const app = new Application({\r\n            width: this.gameConfig.width,\r\n            height: this.gameConfig.height,\r\n            backgroundColor: 0,\r\n        });\r\n\r\n        this.renderer = app.renderer;\r\n        this.stage = app.stage;\r\n        this.view = app.view;\r\n\r\n        this.resize();\r\n    }\r\n\r\n    public addToEngine(engine: Engine): void {\r\n        window.addEventListener('resize', this.handleWindowResize);\r\n\r\n        this.container.appendChild(this.view);\r\n        this.nodes = engine.getNodeList(RenderNode);\r\n        for (let node: RenderNode | null = this.nodes.head; node; node = node.next) {\r\n            this.addToDisplay(node);\r\n        }\r\n        this.nodes.nodeAdded.add(this.addToDisplay);\r\n        this.nodes.nodeRemoved.add(this.removeFromDisplay);\r\n\r\n        this.spaceship = engine.getNodeList(SpaceshipNode);\r\n    }\r\n\r\n    private addToDisplay = (node: RenderNode): void => {\r\n        const { displayObject } = node.display;\r\n        this.stage.addChild(displayObject);\r\n        if (this.options.emitStageEvents) {\r\n            displayObject.emit('addedToStage');\r\n        }\r\n    }\r\n\r\n    private handleWindowResize = (e: Event) => {\r\n        this.resized = true;\r\n    }\r\n\r\n    private removeFromDisplay = (node: RenderNode): void => {\r\n        const { displayObject } = node.display;\r\n        this.stage.removeChild(displayObject);\r\n        if (this.options.emitStageEvents) {\r\n            displayObject.emit('removedFromStage');\r\n        }\r\n    };\r\n\r\n    public update(time: number): void {\r\n        if (this.resized) {\r\n            this.resized = false;\r\n            this.resize();\r\n        }\r\n\r\n        for (let node = this.nodes!.head; node; node = node.next) {\r\n            const { display, position } = node;\r\n            display.displayObject.setTransform(position.x, position.y, 1, 1, position.rotation);\r\n        }\r\n        this.renderer.render(this.stage);\r\n    }\r\n\r\n    private resize(): void {\r\n        const rect: DOMRect = this.container.getBoundingClientRect();\r\n        const rectArea = rect.width * rect.height;\r\n        const scale = rectArea / GameConfig.DEFAULT_SCREEN_SIZE_AREA;\r\n\r\n        this.gameConfig.width = rect.width / scale;\r\n        this.gameConfig.height = rect.height / scale;\r\n\r\n        this.stage.scale.set(scale, scale);\r\n\r\n        this.renderer.view.style.width = rect.width + 'px';\r\n        this.renderer.view.style.height = rect.height + 'px';\r\n        this.renderer.resize(rect.width, rect.height);\r\n    }\r\n\r\n    public removeFromEngine(engine: Engine): void {\r\n        if (this.nodes) {\r\n            this.nodes.nodeAdded.remove(this.addToDisplay);\r\n            this.nodes.nodeRemoved.remove(this.removeFromDisplay);\r\n            this.nodes = null;\r\n        }\r\n\r\n        this.spaceship = null;\r\n\r\n        this.container.removeChild(this.view);\r\n    }\r\n}\r\n","import { Engine, FrameTickProvider } from '@ash.ts/ash';\r\nimport { EntityCreator } from './EntityCreator';\r\nimport { GameConfig } from './GameConfig';\r\nimport { KeyPoll } from './KeyPoll';\r\nimport {\r\n  AnimationSystem,\r\n  AudioSystem,\r\n  BulletAgeSystem,\r\n  CollisionSystem,\r\n  DeathThroesSystem,\r\n  GameManager,\r\n  GunControlSystem,\r\n  HudSystem,\r\n  MotionControlSystem,\r\n  MovementSystem,\r\n  RenderSystem,\r\n  SystemPriorities,\r\n} from './systems';\r\nimport { loadAudioDB } from './sounds';\r\n\r\nexport async function asteroids(container:HTMLElement):Promise<void> {\r\n  const config = new GameConfig(container.clientWidth, container.clientHeight);\r\n  const engine = new Engine();\r\n  const creator = new EntityCreator(engine, config);\r\n  const keyPoll = new KeyPoll();\r\n  const tickProvider = new FrameTickProvider();\r\n\r\n  const audioContext = new AudioContext();\r\n  const audioDB = await loadAudioDB(audioContext);\r\n\r\n  tickProvider.add((delta:number) => engine.update(delta));\r\n  tickProvider.start();\r\n\r\n  engine.addSystem(new GameManager(creator, config), SystemPriorities.preUpdate);\r\n  engine.addSystem(new MotionControlSystem(keyPoll), SystemPriorities.update);\r\n  engine.addSystem(new GunControlSystem(keyPoll, creator), SystemPriorities.update);\r\n  engine.addSystem(new BulletAgeSystem(creator), SystemPriorities.update);\r\n  engine.addSystem(new DeathThroesSystem(creator), SystemPriorities.update);\r\n  engine.addSystem(new MovementSystem(config), SystemPriorities.move);\r\n  engine.addSystem(new CollisionSystem(creator), SystemPriorities.resolveCollisions);\r\n  engine.addSystem(new AnimationSystem(), SystemPriorities.animate);\r\n  engine.addSystem(new HudSystem(), SystemPriorities.preUpdate);\r\n  engine.addSystem(new RenderSystem(container, {emitStageEvents: true},  config), SystemPriorities.render);\r\n//   engine.addSystem(new AudioSystem(audioContext, audioDB), SystemPriorities.audio);\r\n\r\n  creator.createGame();\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from 'vue-property-decorator';\r\nimport { asteroids } from '@/game/Asteroids';\r\nimport storeGameModule from '@/vuex/storeGameModule';\r\nimport { GameState } from '@/game/components';\r\n\r\n@Component({\r\n  components: {}\r\n})\r\nexport default class Game extends Vue {\r\n    mounted() {\r\n        storeGameModule.mutations.reset();\r\n        setTimeout(() => {\r\n            asteroids(this.$refs.game as HTMLElement);\r\n        }, 100);\r\n    }\r\n\r\n    destroyed() {\r\n        console.log('Game', 'destroyed')\r\n    }\r\n\r\n    private get start(): boolean {\r\n        return storeGameModule.getters.state == GameState.WAIT_FOR_START;\r\n    }\r\n\r\n    private get finish(): boolean {\r\n        return storeGameModule.getters.state == GameState.FINISH;\r\n    }\r\n\r\n    private get precision(): string {\r\n        const result = Math.floor((storeGameModule.getters.hits / storeGameModule.getters.shots) * 100);\r\n        return result ? `${result}%` : '';\r\n    }\r\n\r\n    private handleClick(): void {\r\n        if (\r\n            storeGameModule.getters.state == GameState.WAIT_FOR_START\r\n            || storeGameModule.getters.state == GameState.FINISH\r\n        ) {\r\n            storeGameModule.mutations.setState(GameState.PLAY);\r\n        }\r\n    }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Game.vue?vue&type=template&id=883e05de&scoped=true&\"\nimport script from \"./Game.vue?vue&type=script&lang=ts&\"\nexport * from \"./Game.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Game.vue?vue&type=style&index=0&id=883e05de&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"883e05de\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\nimport \"@/styles/assets.styl\";\nimport { Component, Vue } from \"vue-property-decorator\";\nimport Game from \"./vue/Game.vue\";\n\n@Component({\n    components: {\n        Game\n    },\n})\nexport default class App extends Vue {\n    mounted() {\n        console.log(\"App mounted\");\n    }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=bd1513aa&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","declare const vkBridge: any;\r\ndeclare const VK: any;\r\n\r\nexport default class VKBridge {\r\n    constructor() {\r\n        const bridge = vkBridge;\r\n        bridge.subscribe((e: any) => console.log(\"vkBridge event\", e));\r\n        bridge.send(\"VKWebAppInit\", {});\r\n\r\n        VK.init(\r\n            () => {\r\n                VK.addCallback(\"onScrollTop\", (vkScrollPos: number, vkHeight: number, vkOffset: number) => {\r\n                    this.handleOnScrollTop(vkScrollPos, vkHeight, vkOffset);\r\n                });\r\n                VK.callMethod(\"scrollTop\");\r\n            }, \r\n            () => {\r\n                console.log('error')\r\n            },\r\n            '5.130'\r\n        );\r\n    }\r\n\r\n    private handleOnScrollTop(vkScrollPos: number, vkHeight: number, vkOffset: number): void {\r\n        console.log('handleOnScrollTop', vkHeight)\r\n    }\r\n}","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport VKBridge from './vk/VKBridge';\r\nimport store from './vuex'\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  store,\r\n  render: h => h(App)\r\n}).$mount('#app');\r\n\r\nnew VKBridge();\r\n","module.exports = __webpack_public_path__ + \"media/ship.fc37c3a9.mp3\";"],"sourceRoot":""}